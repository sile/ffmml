<html>
  <head>
    <meta charset="utf-8">
    <title>FFMML</title>
  </head>
  <body style="background-color:black" >
    <div id="canvas-area">
      <canvas id="canvas" style="background-color:black"></canvas>
    </div>
    <input value="play audio" type="button" onclick="playAudio()">
    <script src="https://cdn.jsdelivr.net/npm/pagurus@0.5.0/dist/pagurus.min.js"></script>
    <script>
      var system = undefined;
      var game = undefined;

      function playAudio() {
          game.command(system, "playAudio", new Uint8Array([]));
      }

      Pagurus.Game.load("ffmml.wasm").then(async gameObject => {
          game = gameObject;

          const canvas = document.getElementById("canvas");
          system = await Pagurus.System.create(game.memory, canvas);

          game.initialize(system);
          while (true) {
              const event = await system.nextEvent();
              if (!game.handleEvent(system, event)) {
                  break;
              }
          }
      });
    </script>
  </body>
</html>
